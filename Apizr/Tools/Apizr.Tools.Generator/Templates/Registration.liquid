using System.Threading.Tasks;
using System.Collections.Generic;
using Refit;
using Apizr;

namespace {{ NameSpace }}
{
    public static class ApizrRegistration
    {
        public static IApizrRegistry Build() =>
            ApizrBuilder.CreateRegistry(
                registry => registry
{%                  for service in Services -%}
                    .AddManagerFor<I{{ service }}Service>()
{%                  endfor -%}
            );

        public static IServiceCollection AddApizr(this IServiceCollection services)
        {
            services.AddApizr(
                registry => registry
{%                  for service in Services -%}
                    .AddManagerFor<I{{ service }}Service>()
{%                  endfor -%}
            );
        }
    }
}