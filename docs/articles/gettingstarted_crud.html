<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title> | Apizr </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content=" | Apizr ">
      
      
      <link rel="icon" href="../resources/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/Respawnsive/Apizr/blob/dev/Apizr/Docs/Apizr.Docs/articles/gettingstarted_crud.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../resources/logo.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">

<h2 id="watching">Watching</h2>
<p>Please find this getting started tutorial video on YouTube about how to get started with Apizr:</p>
<div class="embeddedvideo"><iframe src="https://www.youtube-nocookie.com/embed/9qXekjZepLA" frameborder="0" allowfullscreen="true"></iframe></div>
<h2 id="defining">Defining</h2>
<p>As we'll use the built-in yet defined ICrudApi, there's no more definition to do.</p>
<p>Here is what the provided interface looks like then:</p>
<pre><code class="lang-csharp">public interface ICrudApi&lt;T, in TKey, TReadAllResult, in TReadAllParams&gt; where T : class
{
    // ==== Create ==== //
    [Post(&quot;&quot;)]
    Task&lt;T&gt; Create([Body] T payload);

    [Post(&quot;&quot;)]
    Task&lt;IApiResponse&lt;T&gt;&gt; SafeCreate([Body] T payload);

    [Post(&quot;&quot;)]
    Task&lt;T&gt; Create([Body] T payload, [RequestOptions] IApizrRequestOptions options);

    [Post(&quot;&quot;)]
    Task&lt;IApiResponse&lt;T&gt;&gt; SafeCreate([Body] T payload, [RequestOptions] IApizrRequestOptions options);

    // ==== ReadAll ==== //
    [Get(&quot;&quot;)]
    Task&lt;TReadAllResult&gt; ReadAll();

    [Get(&quot;&quot;)]
    Task&lt;IApiResponse&lt;TReadAllResult&gt;&gt; SafeReadAll();

    [Get(&quot;&quot;)]
    Task&lt;TReadAllResult&gt; ReadAll([RequestOptions] IApizrRequestOptions options);

    [Get(&quot;&quot;)]
    Task&lt;IApiResponse&lt;TReadAllResult&gt;&gt; SafeReadAll([RequestOptions] IApizrRequestOptions options);

    [Get(&quot;&quot;)]
    Task&lt;TReadAllResult&gt; ReadAll([CacheKey] TReadAllParams readAllParams);

    [Get(&quot;&quot;)]
    Task&lt;IApiResponse&lt;TReadAllResult&gt;&gt; SafeReadAll([CacheKey] TReadAllParams readAllParams);

    [Get(&quot;&quot;)]
    Task&lt;TReadAllResult&gt; ReadAll([CacheKey] TReadAllParams readAllParams, [RequestOptions] IApizrRequestOptions options);

    [Get(&quot;&quot;)]
    Task&lt;IApiResponse&lt;TReadAllResult&gt;&gt; SafeReadAll([CacheKey] TReadAllParams readAllParams, [RequestOptions] IApizrRequestOptions options);

    // ==== Read ==== //
    [Get(&quot;/{key}&quot;)]
    Task&lt;T&gt; Read([CacheKey] TKey key);

    [Get(&quot;/{key}&quot;)]
    Task&lt;IApiResponse&lt;T&gt;&gt; SafeRead([CacheKey] TKey key);

    [Get(&quot;/{key}&quot;)]
    Task&lt;T&gt; Read([CacheKey] TKey key, [RequestOptions] IApizrRequestOptions options);

    [Get(&quot;/{key}&quot;)]
    Task&lt;IApiResponse&lt;T&gt;&gt; SafeRead([CacheKey] TKey key, [RequestOptions] IApizrRequestOptions options);

    // ==== Update ==== //
    [Put(&quot;/{key}&quot;)]
    Task Update(TKey key, [Body] T payload);

    [Put(&quot;/{key}&quot;)]
    Task&lt;IApiResponse&gt; SafeUpdate(TKey key, [Body] T payload);

    [Put(&quot;/{key}&quot;)]
    Task Update(TKey key, [Body] T payload, [RequestOptions] IApizrRequestOptions options);

    [Put(&quot;/{key}&quot;)]
    Task&lt;IApiResponse&gt; SafeUpdate(TKey key, [Body] T payload, [RequestOptions] IApizrRequestOptions options);

    // ==== Delete ==== //
    [Delete(&quot;/{key}&quot;)]
    Task Delete(TKey key);

    [Delete(&quot;/{key}&quot;)]
    Task&lt;IApiResponse&gt; SafeDelete(TKey key);

    [Delete(&quot;/{key}&quot;)]
    Task Delete(TKey key, [RequestOptions] IApizrRequestOptions options);

    [Delete(&quot;/{key}&quot;)]
    Task&lt;IApiResponse&gt; SafeDelete(TKey key, [RequestOptions] IApizrRequestOptions options);
}
</code></pre>
<p>We can see that it comes with or without request options, allowing some option adjustments later at request time.
It comes with or whithout an ApiResponse too, allowing to handle errors or throw exceptions.</p>
<p>About generic types:</p>
<ul>
<li>T and TKey (optional - default: <code>int</code>) meanings are obvious</li>
<li>TReadAllResult (optional - default: <code>IEnumerable&lt;T&gt;</code>) is there to handle cases where ReadAll doesn't return an <code>IEnumerable&lt;T&gt;</code> or derived, but a paged result with some statistics</li>
<li>TReadAllParams (optional - default: <code>IDictionary&lt;string, object&gt;</code>) is there to handle cases where you don't want to provide an <code>IDictionary&lt;string, object&gt;</code> for a ReadAll reaquest, but a custom class</li>
</ul>
<p>But again, nothing to do around here.
You still can read the api documentation about it <a href="/api/Apizr.Requesting.ICrudApi-4.html">here</a>.</p>
<h2 id="registering">Registering</h2>
<p>It's not mandatory to register anything in a container for DI purpose (you can use the returned static instance directly), but we'll describe here how to use it with DI anyway.</p>
<h3 id="registering-a-single-interface">Registering a single interface</h3>
<div class="tabGroup" id="tabgroup_1">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_1_tabid-extended" role="tab" aria-controls="tabpanel_1_tabid-extended" data-tab="tabid-extended" tabindex="0" aria-selected="true">Extended</a>
</li>
<li role="presentation">
<a href="#tabpanel_1_tabid-static" role="tab" aria-controls="tabpanel_1_tabid-static" data-tab="tabid-static" tabindex="-1">Static</a>
</li>
</ul>
<section id="tabpanel_1_tabid-extended" role="tabpanel" data-tab="tabid-extended">

<p>Here is an example of how to register a managed CRUD api interface:</p>
<pre><code class="lang-csharp">public override void ConfigureServices(IServiceCollection services)
{
    // Apizr registration
    services.AddApizrCrudManagerFor&lt;T, TKey, TReadAllResult, TReadAllParams&gt;(options =&gt; options
        .WithBaseAddress(&quot;your specific T entity crud base uri&quot;));
}
</code></pre>
<p>Again, T must be a class.</p>
<p>TKey must be primitive. If you don't provide it here, it will be defined as <code>int</code>.</p>
<p>TReadAllResult must inherit from <code>IEnumerable&lt;&gt;</code> or be a class.
If you don't use paged result, just don't provide any TReadAllResult here and it will be defined as <code>IEnumerable&lt;T&gt;</code>.</p>
<p>TReadAllParams must be a class.
If you don't use a custom class holding your query parameters, just don't provide any TReadAllParams here and it will be defined as <code>IDictionary&lt;string, object&gt;</code>.</p>
<p>You have to provide the specific entity crud base uri with the options builder (if you don't plan to use entity crud attribute).</p>
</section>
<section id="tabpanel_1_tabid-static" role="tabpanel" data-tab="tabid-static" aria-hidden="true" hidden="hidden">

<p>Here is an example of how to register a managed instance of the CRUD api interface:</p>
<pre><code class="lang-csharp">// Apizr registration
myContainer.RegistrationMethod(() =&gt;
    ApizrBuilder.Current.CreateCrudManagerFor&lt;T, TKey, TReadAllResult, TReadAllParams&gt;(options =&gt; options
        .WithBaseAddress(&quot;your specific T entity crud base uri&quot;))
);
</code></pre>
<p>T must be a class.</p>
<p>TKey must be primitive. If you don't provide it here, it will be defined as <code>int</code>.</p>
<p>TReadAllResult must inherit from <code>IEnumerable&lt;&gt;</code> or be a class.
If you don't use paged result, just don't provide any TReadAllResult here and it will be defined as <code>IEnumerable&lt;T&gt;</code>.</p>
<p>TReadAllParams must be a class.
If you don't use a custom class holding your query parameters, just don't provide any TReadAllParams here and it will be defined as <code>IDictionary&lt;string, object&gt;</code>.</p>
<p>You have to provide the specific entity crud base uri with the options builder (if you don't plan to use entity crud attribute).</p>
<p>Also, you could use the manager directly instead of registering it.</p>
</section>
</div>
<h3 id="registering-multiple-interfaces">Registering multiple interfaces</h3>
<p>You may want to register multiple managed api interfaces within the same project.
Also, you may want to share some common configuration between apis without repeating yourself, but at the same time, you may need to set some specific ones for some of it.
This is where the ApizrRegistry comes on stage.</p>
<h4 id="single-common-configuration">Single common configuration</h4>
<p>Here is an example of how to register a managed instance of multiple api interfaces, sharing a single common configuration:</p>
<div class="tabGroup" id="tabgroup_2">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_2_tabid-extended" role="tab" aria-controls="tabpanel_2_tabid-extended" data-tab="tabid-extended" tabindex="0" aria-selected="true">Extended</a>
</li>
<li role="presentation">
<a href="#tabpanel_2_tabid-static" role="tab" aria-controls="tabpanel_2_tabid-static" data-tab="tabid-static" tabindex="-1">Static</a>
</li>
</ul>
<section id="tabpanel_2_tabid-extended" role="tabpanel" data-tab="tabid-extended">

<pre><code class="lang-csharp">public override void ConfigureServices(IServiceCollection services)
{
    // Apizr registration
    services.AddApizr(
        registry =&gt; registry
            .AddCrudManagerFor&lt;T1&gt;(
                options =&gt; options.WithBaseAddress(&quot;your specific T1 entity crud base uri&quot;)
            .AddCrudManagerFor&lt;T2, T2Key, T2ReadAllResult, T2ReadAllParams&gt;(
                options =&gt; options.WithBaseAddress(&quot;your specific T2 entity crud base uri&quot;),
    
        config =&gt; config
            .WithAkavacheCacheHandler()
    );
}
</code></pre>
<p>Here is what we're saying in this example:</p>
<ul>
<li>Add a manager for T1 entity with CRUD api interface and default types into the registry, to register it into the container
<ul>
<li>Set a specific address dedicated to T1's manager</li>
</ul>
</li>
<li>Add a manager for T2 entity with CRUD api interface and custom types into the registry, to register it into the container
<ul>
<li>Set a specific address dedicated to T2's manager</li>
</ul>
</li>
<li>Apply common configuration to all managers by:
<ul>
<li>Providing a cache handler</li>
</ul>
</li>
</ul>
<p>It's an example, meaning if you don't need common and/or specific configuration, just don't provide it.
And yes you can mix classic and CRUD manager registration into the same registry.</p>
<p>Of course, each managers will be regitered into the container so that you can use it directly.</p>
<p>Also, the registry itslef will be registered into the container, so you could use it to get its managers, instead of using each managers.</p>
</section>
<section id="tabpanel_2_tabid-static" role="tabpanel" data-tab="tabid-static" aria-hidden="true" hidden="hidden">

<pre><code class="lang-csharp">// Apizr registry
var apizrRegistry = ApizrBuilder.Current.CreateRegistry(
    registry =&gt; registry
        .AddCrudManagerFor&lt;T1&gt;(
            options =&gt; options.WithBaseAddress(&quot;your specific T1 entity crud base uri&quot;)
        .AddCrudManagerFor&lt;T2, T2Key, T2ReadAllResult, T2ReadAllParams&gt;(
            options =&gt; options.WithBaseAddress(&quot;your specific T2 entity crud base uri&quot;),
    
    config =&gt; config
        .WithAkavacheCacheHandler()
);

// Container registration
apizrRegistry.Populate((type, factory) =&gt; 
    myContainer.RegistrationMethodFactory(type, factory)
);
</code></pre>
<p>Here is what we're saying in this example:</p>
<ul>
<li>Add a manager for T1 entity with CRUD api interface and default types into the registry
<ul>
<li>Set a specific address dedicated to T1's manager</li>
</ul>
</li>
<li>Add a manager for T2 entity with CRUD api interface and custom types into the registry
<ul>
<li>Set a specific address dedicated to T2's manager</li>
</ul>
</li>
<li>Apply common configuration to all managers by:
<ul>
<li>Providing a cache handler</li>
</ul>
</li>
</ul>
<p>It's an example, meaning if you don't need common and/or specific configuration, just don't provide it.
And yes you can mix classic and CRUD manager registration into the same registry.</p>
<p>Also, you could register the registry itslef, instead of its populated managers and then use its managers directly.</p>
<p>Or, you could use the managers directly from the registry instead of registering anything.</p>
<p>Here's how to get a manager from the registry:</p>
<pre><code class="lang-csharp">// T1 with default registered types
var t1Manager = apizrRegistry.GetCrudManagerFor&lt;T1&gt;();

// T2 with custom registered types
var t2Manager = apizrRegistry.GetCrudManagerFor&lt;T2, T2Key, T2ReadAllResult, T2ReadAllParams&gt;();
</code></pre>
</section>
</div>

<p>Here's how to get a manager from the registry:</p>
<pre><code class="lang-csharp">// T1 with default registered types
var t1Manager = apizrRegistry.GetCrudManagerFor&lt;T1&gt;();

// T2 with custom registered types
var t2Manager = apizrRegistry.GetCrudManagerFor&lt;T2, T2Key, T2ReadAllResult, T2ReadAllParams&gt;();
</code></pre>
<h4 id="multiple-common-configurations">Multiple common configurations</h4>
<p>Here is an example of how to register a managed instance of multiple api interfaces, sharing multiple common configurations at different group level.
It could be usefull when requesting mutliple apis (multiple base address) comming with multiple endpoints (multiple base path).</p>
<div class="tabGroup" id="tabgroup_3">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_3_tabid-extended" role="tab" aria-controls="tabpanel_3_tabid-extended" data-tab="tabid-extended" tabindex="0" aria-selected="true">Extended</a>
</li>
<li role="presentation">
<a href="#tabpanel_3_tabid-static" role="tab" aria-controls="tabpanel_3_tabid-static" data-tab="tabid-static" tabindex="-1">Static</a>
</li>
</ul>
<section id="tabpanel_3_tabid-extended" role="tabpanel" data-tab="tabid-extended">

<pre><code class="lang-csharp">public override void ConfigureServices(IServiceCollection services)
{
    // Apizr registration
    services.AddApizr(
        registry =&gt; registry
            .AddGroup(
                group =&gt; group
                    .AddCrudManagerFor&lt;T1&gt;(
                        config =&gt; config.WithBasePath(&quot;t1&quot;)
                    .AddCrudManagerFor&lt;T2, T2Key, T2ReadAllResult, T2ReadAllParams&gt;(
                        config =&gt; config.WithBasePath(&quot;t2&quot;),
                config =&gt; config.WithBaseAddress(&quot;https://crud.io/api&quot;))

            .AddCrudManagerFor&lt;T3&gt;(
                config =&gt; config.WithBaseAddress(&quot;https://crud.com/api&quot;),
    
        config =&gt; config.WithAkavacheCacheHandler()
    );
}
</code></pre>
<p>Here is what we're saying in this example:</p>
<ul>
<li>Add a manager for T1 entity with CRUD api interface and default types into the registry, to register it into the container
<ul>
<li>Set a common base address (<a href="https://crud.io/api">https://crud.io/api</a>) dedicated to T1's manager</li>
<li>Set a specific base path (t1) dedicated to T1's manager</li>
</ul>
</li>
<li>Add a manager for T2 entity with CRUD api interface and custom types into the registry, to register it into the container
<ul>
<li>Set a common base address (<a href="https://crud.io/api">https://crud.io/api</a>) dedicated to T2's manager</li>
<li>Set a specific base path (t1) dedicated to T2's manager</li>
</ul>
</li>
<li>Add a manager for T3 entity with CRUD api interface and default types into the registry, to register it into the container
<ul>
<li>Set a specific base address (<a href="https://crud.com/api">https://crud.com/api</a>) dedicated to T3's manager</li>
</ul>
</li>
<li>Apply common configuration to all managers by:
<ul>
<li>Providing a cache handler</li>
</ul>
</li>
</ul>
<p>It's an example, meaning if you don't need common and/or specific configuration, just don't provide it.
And yes you can mix classic and CRUD manager registration into the same registry/group.
You can add mutliple group at the same level and go deeper with group into group itself.</p>
<p>Of course, each managers will be regitered into the container so that you can use it directly.</p>
<p>Also, the registry itslef will be registered into the container, so you could use it to get its managers, instead of using each managers.</p>
</section>
<section id="tabpanel_3_tabid-static" role="tabpanel" data-tab="tabid-static" aria-hidden="true" hidden="hidden">

<pre><code class="lang-csharp">// Apizr registry
var apizrRegistry = ApizrBuilder.Current.CreateRegistry(
    registry =&gt; registry
        .AddGroup(
            group =&gt; group
                .AddCrudManagerFor&lt;T1&gt;(
                    config =&gt; config.WithBasePath(&quot;t1&quot;)
                .AddCrudManagerFor&lt;T2, T2Key, T2ReadAllResult, T2ReadAllParams&gt;(
                    config =&gt; config.WithBasePath(&quot;t2&quot;),
            config =&gt; config.WithBaseAddress(&quot;https://crud.io/api&quot;))

        .AddCrudManagerFor&lt;T3&gt;(
            config =&gt; config.WithBaseAddress(&quot;https://crud.com/api&quot;),
    
    config =&gt; config.WithAkavacheCacheHandler()
);

// Container registration
apizrRegistry.Populate((type, factory) =&gt; 
    myContainer.RegistrationMethodFactory(type, factory)
);
</code></pre>
<p>Here is what we're saying in this example:</p>
<ul>
<li>Add a manager for T1 entity with CRUD api interface and default types into the registry
<ul>
<li>Set a common base address (<a href="https://crud.io/api">https://crud.io/api</a>) dedicated to T1's manager</li>
<li>Set a specific base path (t1) dedicated to T1's manager</li>
</ul>
</li>
<li>Add a manager for T2 entity with CRUD api interface and custom types into the registry
<ul>
<li>Set a common base address (<a href="https://crud.io/api">https://crud.io/api</a>) dedicated to T2's manager</li>
<li>Set a specific base path (t1) dedicated to T2's manager</li>
</ul>
</li>
<li>Add a manager for T3 entity with CRUD api interface and default types into the registry
<ul>
<li>Set a specific base address (<a href="https://crud.com/api">https://crud.com/api</a>) dedicated to T3's manager</li>
</ul>
</li>
<li>Apply common configuration to all managers by:
<ul>
<li>Providing a cache handler</li>
</ul>
</li>
</ul>
<p>It's an example, meaning if you don't need common and/or specific configuration, just don't provide it.
And yes you can mix classic and CRUD manager registration into the same registry/group.
You can add mutliple group at the same level and go deeper with group into group itself.</p>
<p>Also, you could register the registry itslef, instead of its populated managers and then use its managers directly.</p>
<p>Or, you could use the managers directly from the registry instead of registering anything.</p>
</section>
</div>

<p>Here's how to get a manager from the registry:</p>
<pre><code class="lang-csharp">// T1 with default registered types
var t1Manager = apizrRegistry.GetCrudManagerFor&lt;T1&gt;();

// T2 with custom registered types
var t2Manager = apizrRegistry.GetCrudManagerFor&lt;T2, T2Key, T2ReadAllResult, T2ReadAllParams&gt;();

// T3 with default registered types
var t3Manager = apizrRegistry.GetCrudManagerFor&lt;T3&gt;();
</code></pre>
<h3 id="registering-all-scanned-interfaces">Registering all scanned interfaces</h3>
<div class="tabGroup" id="tabgroup_4">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_4_tabid-extended" role="tab" aria-controls="tabpanel_4_tabid-extended" data-tab="tabid-extended" tabindex="0" aria-selected="true">Extended</a>
</li>
<li role="presentation">
<a href="#tabpanel_4_tabid-static" role="tab" aria-controls="tabpanel_4_tabid-static" data-tab="tabid-static" tabindex="-1">Static</a>
</li>
</ul>
<section id="tabpanel_4_tabid-extended" role="tabpanel" data-tab="tabid-extended">

<p>First you have to tell Apizr which entity to auto register a crud api for by assembly scanning thanks to the <code>AutoRegister</code> attribute:</p>
<pre><code class="lang-csharp">[AutoRegister(&quot;https://mybaseuri.com/api/myentity&quot;)]
public record MyEntity
{
    [JsonPropertyName(&quot;id&quot;)]
    public int Id { get; init; }

    ...
}

 // OR with custom arguments
[AutoRegister&lt;ICrudApi&lt;MyEntity, string, MyPagedResult&lt;MyEntity&gt;, MyReadAllParamsType&gt;&gt;(&quot;https://mybaseuri.com/api/myentity&quot;)]
public record MyEntity
{
    [JsonPropertyName(&quot;id&quot;)]
    public int Id { get; init; }

    ...
}
</code></pre>
<p>Thanks to this attribute:</p>
<ul>
<li>(Optional) We can specify the crud api with custom arguments if needed (otherwise default arguments will be <code>int</code>, <code>IEnumerable&lt;T&gt;</code> and <code>IDictionary&lt;string, object&gt;</code>)</li>
<li>(Mandatory) We have to provide the specific entity crud base uri (no more fluent declaration)</li>
</ul>
<p>Then fluently just write:</p>
<pre><code class="lang-csharp">public override void ConfigureServices(IServiceCollection services)
{
    // Apizr registration
    services.AddApizrCrudManagerFor([ASSEMBLIES_CONTAINING_ENTITIES]);
}
</code></pre>
<p>Apizr will scan assemblies to auto register managers for decorated entities.</p>
</section>
<section id="tabpanel_4_tabid-static" role="tabpanel" data-tab="tabid-static" aria-hidden="true" hidden="hidden">

<p>Not available.</p>
</section>
</div>
<h2 id="using">Using</h2>
<p>Here is an example of how to send a web request from an app - e.g. using Apizr in a MAUI mobile app.</p>
<p>Inject <code>IApizrManager&lt;ICrudApi&lt;T, TKey, TReadAllResult, TReadAllParams&gt;&gt;</code> where you need it - e.g. into your ViewModel constructor</p>
<pre><code class="lang-csharp">public class YourViewModel
{
    private readonly IApizrManager&lt;ICrudApi&lt;User, int, PagedResult&lt;User&gt;, ReadAllUsersParams&gt;&gt; _userCrudManager;
	
    public YouViewModel(IApizrManager&lt;ICrudApi&lt;User, int, PagedResult&lt;User&gt;, ReadAllUsersParams&gt;&gt; userCrudManager)
    // Or registry injection
    //public YouViewModel(IApizrRegistry apizrRegistry)
    {
		_userCrudManager = userCrudManager;

        // Or registry injection
        //_userCrudManager = apizrRegistry.GetCrudManagerFor&lt;User, int, PagedResult&lt;User&gt;, ReadAllUsersParams&gt;&gt;();
    }
    
    public ObservableCollection&lt;User&gt;? Users { get; set; }

    private async Task GetUsersAsync()
    {
        IList&lt;User&gt;? users;
        try
        {
            var pagedUsers = await _userCrudManager.ExecuteAsync(api =&gt; api.ReadAll());
 
            // OR with some option adjustments
            // var userList = await _userCrudManager.ExecuteAsync((options, api) =&gt; api.ReadAll(options),
            //                  options =&gt; options.WithPriority(Priority.Background)); 

            users = pagedUsers.Data?.ToList();
        }
        catch (ApizrException&lt;PagedResult&lt;User&gt;&gt; e)
        {
            var message = e.InnerException is IOException ? &quot;No network&quot; : (e.Message ?? &quot;Error&quot;);
            UserDialogs.Instance.Toast(new ToastConfig(message) { BackgroundColor = Color.Red, MessageTextColor = Color.White });

            users = e.CachedResult?.Data;
        }

        if(users != null)
            Users = new ObservableCollection&lt;User&gt;(users);
    }
}
</code></pre>
<p>We catch any ApizrException as it will contain the original inner exception, but also the previously cached result if some.
If you provided an IConnectivityHandler implementation and there's no network connectivity before sending request, Apizr will throw with an IO inner exception without sending the request.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/Respawnsive/Apizr/blob/dev/Apizr/Docs/Apizr.Docs/articles/gettingstarted_crud.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Supported by Respawnsive
        </div>
      </div>
    </footer>
  </body>
</html>
